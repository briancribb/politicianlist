(()=>{"use strict";(()=>{function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function tmc_throttle(delay,fn){var lastCall=0;return function(){var now=(new Date).getTime();if(!(now-lastCall<delay))return lastCall=now,fn.apply(void 0,arguments)}}function tmc_debounce(delay,fn){var timerId;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];timerId&&clearTimeout(timerId),timerId=setTimeout((function(){fn.apply(void 0,args),timerId=null}),delay)}}function tmc_getParams(str){var _step,objParams={},params=new URLSearchParams(window.location.search.slice(1)),arrTemp=[],_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(params.keys());try{for(_iterator.s();!(_step=_iterator.n()).done;){var key=_step.value;arrTemp.push(key)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return _toConsumableArray(new Set(arrTemp)).forEach((function(key){objParams[key]=params.getAll(key)})),objParams}const scripts_states={AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};const scripts_missing={A000148:"Jake Auchincloss",B000668:"Cliff Bentz",B000740:"Stephanie Bice",B000825:"Lauren Boebert",B001312:"Carolyn Bourdeaux",B001223:"Jamaal Bowman",B001224:"Cori Bush",C001039:"Kat Cammack",C001054:"Jerry Carl",C001104:"Madison Cawthorn",C001116:"Andrew Clyde",D000032:"Byron Donalds",F000246:"Pat Fallon",F000446:"Randy Feenstra",L000273:"Teresa Fernandez",F000470:"Michelle Fischbach",F000471:"Scott Fitzgerald",F000472:"Scott Franklin",G000597:"Andrew Garbarino",G000593:"Carlos Giménez",G000594:"Tony Gonzales",G000595:"Robert Good",G000596:"Marjorie Greene",H000601:"Bill Hagerty",H001086:"Diana Harshbarger",H001084:"Yvette Herrell",H000273:"John Hickenlooper",H001091:"Ashley Hinson",J000304:"Ronny Jackson",J000305:"Sara Jacobs",J000306:"Mondaire Jones",K000396:"Kaialiʻi Kahele",K000377:"Mark Kelly",K000397:"Young Kim",L000266:"Jake LaTurner",M000194:"Nancy Mace",M000317:"Nicole Malliotakis",M000871:"Tracey Mann",M001135:"Kathy Manning",M001136:"Lisa McClain",M001186:"Peter Meijer",M001211:"Mary Miller",M001215:"Mariannette Miller-Meeks",M001213:"Blake Moore",M001212:"Barry Moore",M001214:"Frank Mrvan",N000026:"Troy Nehls",N000192:"Marie Newman",O000019:"Jay Obernolte",O000174:"Jon Ossoff",O000086:"Burgess Owens",P000048:"August Pfluger",R000103:"Matt Rosendale",R000305:"Deborah Ross",S000168:"Maria Salazar",S000929:"Victoria Spartz",S001135:"Michelle Steel",S001159:"Marilyn Strickland",T000486:"Ritchie Torres",T000278:"Tommy Tuberville",V000134:"Beth Van Duyne",W000790:"Raphael Warnock",W000788:"Nikema Williams"};function Memberlist_typeof(obj){return Memberlist_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Memberlist_typeof(obj)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===Memberlist_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}const Memberlist=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(MemberList,React.Component);var _super=_createSuper(MemberList);function MemberList(props){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MemberList),(_this=_super.call(this,props)).state={};return["getIconClass","getMemberName"].forEach((function(name,i){_this[name]=_this[name].bind(_assertThisInitialized(_this))})),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(MemberList,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"getIconClass",value:function getIconClass(party){var objClasses={R:"fas fa-republican",D:"fas fa-democrat",I:"fas fa-flag-usa"};return objClasses[party]||objClasses.I}},{key:"getMemberName",value:function getMemberName(member){return member.short_title+" "+member.first_name+" "+member.last_name}},{key:"render",value:function render(){var member=this.props.members[0],partyColor="success";switch(member.party){case"R":partyColor="danger";break;case"D":partyColor="primary"}return React.createElement("div",{className:"container"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col"},React.createElement("div",{className:"btn-group btn-group-lg w-100 mb-3",role:"group","aria-label":"Modal launch buttons"},React.createElement("button",{type:"button",className:"d-inline-block btn btn-light flex-fill border border-dark w-50","data-view":"filters",onClick:this.handleLaunchModal},"Filters"),React.createElement("button",{type:"button",className:"d-inline-block btn btn-light flex-fill border border-dark w-50","data-view":"sorting",onClick:this.handleLaunchModal},"Sorting")))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col"},React.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Filter by name",onChange:this.handleInputChange}),React.createElement("small",{className:"d-block mt-1 mb-3 px-3"},React.createElement("em",null,"Filtering by name requires at least three characters.")))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col"},React.createElement("div",{"data-member-id":member.id,className:"member card mb-3 border border-"+partyColor,key:member.id},React.createElement("div",{className:"card-header bg-"+partyColor+" text-white d-sm-flex justify-content-between"},React.createElement("div",{className:"party"},React.createElement("i",{className:this.getIconClass(member.party)+" mr-2"})," ",member.party_name),React.createElement("div",{className:"next"},"Next: ",React.createElement("strong",null,member.next_election))),React.createElement("div",{className:"card-body"},React.createElement("div",{className:"d-sm-flex"},React.createElement("div",{className:"member-photo-wrapper mb-2 mb-sm-0"},React.createElement("img",{className:"member-photo img-fluid mx-auto ml-sm-0",onError:this.handleImageError,src:member.member_photo_link,loading:"lazy",alt:"Photo of "+this.getMemberName(member)}),React.createElement("div",{className:"missing-photo text-center"},React.createElement("i",{className:"fas fa-user mb-3 text-secondary"}),React.createElement("small",{className:"d-block"},"Photo not available"))),React.createElement("div",{className:"member-info-wrapper"},React.createElement("h5",{className:"card-title mb-1"},this.getMemberName(member)),React.createElement("div",{className:"mb-0"},member.state_name),React.createElement("div",{className:"mb-0"},"Age: "+member.age))))))))}}]),MemberList}();var POL={congress:118,init:function init(){var housePromise,senatePromise,_this=this;this.utils=this.setupUtils();var localStored=this.getStored();localStored?(housePromise=Promise.resolve(localStored.house),senatePromise=Promise.resolve(localStored.senate)):(housePromise=new Promise((function(resolve,reject){_this.getData(_this.congress,"house").then((function(data){resolve(_this.updateMembers(data.results[0]))}))})),senatePromise=new Promise((function(resolve,reject){_this.getData(_this.congress,"senate").then((function(data){resolve(_this.updateMembers(data.results[0]))}))}))),Promise.all([housePromise,senatePromise]).then((function(allResults){localStored||localStorage.setItem("politicianlist_"+_this.congress,JSON.stringify({timestamp:Date.now(),house:allResults[0],senate:allResults[1]})),console.log({members:allResults[0].concat(allResults[1])}),console.log("app and stuff");var domNode=document.getElementById("app");ReactDOM.createRoot(domNode).render(React.createElement(Memberlist,{members:allResults[0].concat(allResults[1])},null))}))},updateMembers:function updateMembers(obj){var objParties={R:"Republican",D:"Democrat",I:"Independent"},updatedMembers=[],objDoubles={},everyone=obj.members.filter((function(item){return!0===item.in_office}));everyone.forEach((function(member){member.party_name=objParties[member.party]||"Independent",member.state_name=scripts_states[member.state],member.chamber=obj.chamber;var birthDate=new Date(member.date_of_birth),today=new Date,age=today.getFullYear()-birthDate.getFullYear(),m=today.getMonth()-birthDate.getMonth();(m<0||0===m&&today.getDate()<birthDate.getDate())&&age--,member.age=age,member.missing_photo=!!scripts_missing[member.id],member.member_photo_link=scripts_missing[member.id]?"src/images/missing/225x275/"+member.id+".jpg":"https://theunitedstates.io/images/congress/225x275/"+member.id+".jpg",everyone.filter((function(m){return m.id===member.id})).length>1?(objDoubles[member.id]=objDoubles[member.id]||[],objDoubles[member.id].push(member)):updatedMembers.push(member)})),Object.keys(objDoubles).forEach((function(id){updatedMembers.push(objDoubles[id].reduce(reducer))}));var reducer=function reducer(accumulator,currentValue){currentValue>accumulator&&(accumulator=currentValue);var accDate=accumulator?new Date(accumulator.last_updated):null;return new Date(currentValue.last_updated).getTime()>accDate.getTime()&&(accumulator=currentValue),accumulator};return updatedMembers},setupUtils:function setupUtils(){!function tmc_RAF(){window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}();var ut=function tmc_documentHidden(){var tmc={};return void 0!==document.hidden?(tmc.hidden="hidden",tmc.visibilityChange="visibilitychange",tmc.visibilityState="visibilityState"):void 0!==document.mozHidden?(tmc.hidden="mozHidden",tmc.visibilityChange="mozvisibilitychange",tmc.visibilityState="mozVisibilityState"):void 0!==document.msHidden?(tmc.hidden="msHidden",tmc.visibilityChange="msvisibilitychange",tmc.visibilityState="msVisibilityState"):void 0!==document.webkitHidden&&(tmc.hidden="webkitHidden",tmc.visibilityChange="webkitvisibilitychange",tmc.visibilityState="webkitVisibilityState"),tmc.document_hidden=document[tmc.hidden],tmc}();return ut.trans_end=function tmc_transEnd(){var end,st=document.body.style;return void 0!==st.transition?end="transitionend":void 0!==st.OTransition?end="oTransitionEnd":void 0!==st.MozTransition?end="transitionend":void 0!==st.WebkitTransition&&(end="webkitTransitionEnd"),end}(),ut.throttle=tmc_throttle,ut.debounce=tmc_debounce,ut.getParams=tmc_getParams,ut},getStored:function getStored(){var stored=localStorage.getItem("politicianlist_"+this.congress);if(!stored)return null;var storedData=JSON.parse(stored);return Date.now()-storedData.timestamp<86400?storedData:null},getAllMembers:function getAllMembers(){return this.senate.members.concat(this.house.members)},getData:function getData(congress,chamber){return $.ajax({url:"https://api.propublica.org/congress/v1/".concat(congress,"/").concat(chamber,"/members.json"),beforeSend:function beforeSend(xhr){xhr.setRequestHeader("X-API-Key","mQSfoVKW5dWSJXfcHtxSAXFneRkyGqnBzmrp4jLx")}})},utils:{}};$(document).ready((function(){POL.init()}))})()})();